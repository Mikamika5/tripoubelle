<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Guide du tri - Lisibilit√© am√©lior√©e</title>
  <meta name="description" content="Entrez un produit, choisissez une suggestion, et voyez o√π le jeter : poubelle jaune, compost, ordures m√©nag√®res ou d√©chetterie." />
  <style>
    :root{
      /* Palette claire, contrast√©e */
      --bg-1: #f8fafc; /* slate-50 */
      --bg-2: #eef2f7; /* slate-100-ish */
      --text: #0f172a; /* slate-900 */
      --muted: #475569; /* slate-600 */
      --surface: #ffffff;
      --border: #e2e8f0;
      --ring: #16a34a; /* green-600 */

      --amber-700: #b45309;
      --amber-100: #fef3c7;
      --green-700: #166534;
      --green-100: #dcfce7;
      --slate-700: #334155;
      --slate-100: #f1f5f9;
      --violet-700: #5b21b6;
      --violet-100: #ede9fe;

      --radius: 16px;
      --shadow-1: 0 8px 28px rgba(2,6,23,0.08);
      --shadow-2: 0 1px 2px rgba(2,6,23,0.06);

      --focus-ring: 0 0 0 3px rgba(22,163,74,0.2);
      --mark-bg: #fef08a; /* yellow-200 */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-tap-highlight-color: transparent;
      line-height: 1.5;
    }

    .container{
      max-width: 820px;
      margin: 0 auto;
      padding: clamp(16px, 3vw, 28px) clamp(14px, 4vw, 28px) 64px;
    }

    header{
      display:flex;
      align-items:center;
      gap:16px;
      padding: 2px 0 8px;
    }
    .logo{
      width:54px; height:54px;
      display:grid; place-items:center;
      border-radius:14px;
      background: linear-gradient(135deg, #22c55e, #86efac);
      color:#064e3b;
      font-size:26px;
      font-weight:900;
      box-shadow: var(--shadow-1);
    }
    .title h1{
      margin:0;
      font-size: clamp(20px, 3.6vw, 28px);
      font-weight: 900;
      letter-spacing: 0.2px;
    }
    .title p{
      margin:4px 0 0 0;
      font-size: 14px;
      color: var(--muted);
    }

    main{ margin-top: 14px; }

    label{
      display:block;
      font-size:14px;
      color: var(--muted);
      margin: 0 0 8px 2px;
    }

    .search-card{
      position: relative;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 14px 12px;
      box-shadow: var(--shadow-1);
    }

    .search-wrap{ position:relative; }
    .input{
      width:100%;
      height:56px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: #ffffff;
      color: var(--text);
      padding: 14px 52px 14px 46px;
      font-size: 16px;
      outline: none;
      transition: border-color .15s, box-shadow .15s, background .15s, transform .06s ease;
      box-shadow: var(--shadow-2);
    }
    .input::placeholder{ color:#64748b; }
    .input:focus{
      border-color: #86efac;
      box-shadow: var(--focus-ring);
    }
    .input:active { transform: translateY(1px); }

    .leading-icon{
      position:absolute; left:10px; top:50%; transform: translateY(-50%);
      width:28px; height:28px; border-radius: 8px;
      display:grid; place-items:center;
      color:#0f766e; background:#ecfeff;
      border: 1px solid #bae6fd;
    }
    .leading-icon span{ font-size:14px }

    .clear-btn{
      position:absolute; right:8px; top:50%; transform: translateY(-50%);
      height:40px; min-width:40px;
      border:1px solid var(--border); border-radius:10px;
      background:#ffffff; color:#334155;
      font-size:16px; padding:0 10px;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      box-shadow: var(--shadow-2);
    }
    .clear-btn:active{ transform: translateY(-50%) scale(0.98); }
    .clear-btn:focus{ outline: none; box-shadow: var(--focus-ring); }

    .suggestions{
      position:absolute; z-index: 20; top: calc(100% + 10px); left:0; right:0;
      background: #ffffff;
      border:1px solid var(--border);
      border-radius: 14px;
      padding:6px;
      box-shadow: 0 20px 44px rgba(2,6,23,0.12), 0 3px 8px rgba(2,6,23,0.08);
      max-height: 56vh; overflow:auto;
    }
    .s-head{
      padding: 8px 12px 6px;
      font-size: 12px; color:#64748b;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, #f8fafc, #ffffff);
      border-radius: 10px 10px 0 0;
    }
    .s-item{
      list-style: none;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      padding:12px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size:16px;
      color: var(--text);
      border:1px solid transparent;
      transition: background .12s, border-color .12s, transform .06s;
    }
    .s-item:hover, .s-item[aria-selected="true"]{
      background: var(--slate-100);
      border-color: var(--border);
    }
    .s-left{ display:flex; align-items:center; gap:10px; min-width:0; }
    .s-left .avatar{
      width:26px; height:26px; border-radius:8px; display:grid; place-items:center;
      background:#f1f5f9; color:#334155; font-size:13px; flex:0 0 auto;
      border: 1px solid var(--border);
    }
    .s-left .label { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .s-right{ display:flex; align-items:center; gap:8px; }
    .s-right .arrow{ color:#64748b }

    .pill{
      font-size:12px; padding:6px 10px; border-radius: 999px; font-weight:800;
      border:1px solid transparent; white-space: nowrap; line-height: 1;
    }
    .cat-jaune { color: var(--amber-700); background: var(--amber-100); border-color: #fcd34d; }
    .cat-compost { color: var(--green-700); background: var(--green-100); border-color: #86efac; }
    .cat-ordures { color: var(--slate-700); background: var(--slate-100); border-color: #cbd5e1; }
    .cat-dechetterie { color: var(--violet-700); background: var(--violet-100); border-color: #d8b4fe; }

    .empty{
      padding:12px; color: #64748b; font-size:14px;
    }

    .result{
      margin-top:18px;
      background: var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow-1);
      overflow: hidden;
      opacity: 0; transform: translateY(6px);
      transition: opacity .2s ease, transform .2s ease;
    }
    .result.show { opacity: 1; transform: translateY(0); }
    .r-accent{
      height: 6px; width: 100%; border-radius: 999px;
      background: linear-gradient(90deg, #e2e8f0, #ffffff);
      margin-bottom: 10px;
    }
    .r-head{
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
    }
    .product{
      font-size: clamp(18px, 3.6vw, 22px); font-weight:900; margin:0 0 6px 0;
      letter-spacing: .2px;
    }

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      font-weight:900; font-size:14px; line-height:1;
      padding:10px 12px; border-radius: 12px;
      border:1px solid #e5e7eb; color:#0f172a;
      white-space: nowrap; background: #ffffff;
      box-shadow: var(--shadow-2);
    }
    .badge.cat-jaune { border-color:#fcd34d; background: #fffaf0; }
    .badge.cat-compost { border-color:#86efac; background: #f0fdf4; }
    .badge.cat-ordures { border-color:#cbd5e1; background: #f8fafc; }
    .badge.cat-dechetterie { border-color:#d8b4fe; background: #faf5ff; }

    .badge .dot{ width:10px; height:10px; border-radius:999px; background: currentColor; box-shadow: 0 0 0 2px rgba(0,0,0,0.06) inset; }
    .badge .ico{ font-size:16px; }

    .r-note{ margin-top:10px; font-size:15px; color:#334155; }

    .syns{
      margin-top:10px; display:flex; flex-wrap:wrap; gap:8px;
    }
    .syn-chip{
      font-size:12px; padding:6px 8px; border-radius:999px; color:#1f2937; background:#f1f5f9; border:1px solid var(--border);
    }

    .guides{
      margin-top:14px; background: #ffffff; border:1px dashed var(--border); border-radius:12px; padding:12px;
    }
    details{ border-radius:10px; }
    summary{
      cursor:pointer;
      list-style: none;
      display:flex; align-items:center; gap:8px;
      color:#0f172a; font-weight:800; font-size:14px;
    }
    summary::-webkit-details-marker{ display:none; }
    .tips{ margin-top:10px; font-size:14px; color:#334155; }
    .tips li{ margin:6px 0; }

    .disclaimer{ margin-top:14px; font-size:12px; color: #64748b; }
    footer{ margin-top:22px; color: #64748b; font-size:12px; text-align:center; }

    mark{
      background: var(--mark-bg);
      color: inherit; padding: 0 .5px; border-radius: 2px;
    }

    /* Accessibilit√©: focus visible + r√©duire animations */
    :focus-visible { outline: none; box-shadow: var(--focus-ring); border-radius: 8px; }
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true">‚ôªÔ∏è</div>
      <div class="title">
        <h1>Guide du tri</h1>
        <p>Entrez un produit et choisissez une suggestion</p>
      </div>
    </header>

    <main role="main">
      <section class="search-card" aria-label="Recherche de produit">
        <form class="search" role="search" autocomplete="off" onsubmit="return false">
          <label for="product-input">Nom du produit</label>
          <div class="search-wrap" aria-haspopup="listbox" aria-owns="suggestions" aria-expanded="false">
            <div class="leading-icon" aria-hidden="true"><span>üîé</span></div>
            <input
              id="product-input"
              class="input"
              type="text"
              inputmode="search"
              autocapitalize="sentences"
              autocorrect="on"
              aria-autocomplete="list"
              aria-controls="suggestions"
              aria-activedescendant=""
              placeholder="Ex. bouteille plastique, canette, peau de banane‚Ä¶"
            />
            <button type="button" class="clear-btn" id="clear-btn" aria-label="Effacer la saisie">‚úï</button>
            <div id="suggestions" class="suggestions" role="listbox" aria-label="Suggestions" hidden></div>
          </div>
        </form>
      </section>

      <section id="result" class="result" aria-live="polite" hidden>
        <div class="r-accent" aria-hidden="true"></div>
        <div class="r-head">
          <div>
            <h2 id="product-name" class="product"></h2>
            <div id="category-badge" class="badge"><span class="ico" aria-hidden="true">‚ÑπÔ∏è</span><span class="dot" aria-hidden="true"></span><span></span></div>
          </div>
        </div>
        <p id="category-note" class="r-note"></p>
        <div id="synonyms" class="syns" hidden></div>

        <div class="guides">
          <details>
            <summary>Consignes g√©n√©rales</summary>
            <ul class="tips">
              <li><strong>Poubelle jaune de tri</strong> : emballages et papiers. Videz, inutile de laver. D√©posez en vrac, non imbriqu√©s.</li>
              <li><strong>Compost</strong> : d√©chets organiques (√©pluchures, marc de caf√©, pain‚Ä¶). √âvitez viande/poisson si compost domestique.</li>
              <li><strong>Ordures m√©nag√®res</strong> : ce qui n‚Äôest ni compostable ni recyclable. Emballez pour √©viter les nuisances.</li>
              <li><strong>D√©chetterie</strong> : d√©chets dangereux, √©lectriques/√©lectroniques, volumineux (piles, peintures, huiles, batteries‚Ä¶).</li>
            </ul>
          </details>
        </div>

        <p class="disclaimer">Les consignes peuvent varier selon votre commune. R√©f√©rez‚Äëvous √† votre collectivit√© en cas de doute.</p>
      </section>

      <footer>
        Fait pour mobile et tablette ‚Ä¢ Aucune donn√©e n‚Äôest envoy√©e en ligne
      </footer>
    </main>
  </div>

  <script>
    // Cat√©gories: "poubelle_jaune", "compost", "ordures", "dechetterie"
    const ITEMS = [
      // ===================== Poubelle jaune (emballages et papiers) =====================
      { name: "Bouteille en plastique", category: "poubelle_jaune", synonyms: ["bouteille plastique","bouteille PET","bouteille eau"], note: "√âcrasez l√©g√®rement, rebouchez et mettez dans le bac jaune." },
      { name: "Flacon de shampoing", category: "poubelle_jaune", synonyms: ["flacon shampooing","flacon gel douche"], note: "Bien vider, remettre le bouchon." },
      { name: "Bidon de lessive", category: "poubelle_jaune", synonyms: ["bidon d√©tergent","bidon javel vide"], note: "Uniquement bien vide." },
      { name: "Barquette en plastique", category: "poubelle_jaune", synonyms: ["barquette plastique","barquette alimentaire"], note: "" },
      { name: "Barquette en polystyr√®ne", category: "poubelle_jaune", synonyms: ["barquette PS","barquette XPS"], note: "" },
      { name: "Barquette en aluminium", category: "poubelle_jaune", synonyms: ["barquette alu"], note: "" },
      { name: "Canette", category: "poubelle_jaune", synonyms: ["canette aluminium","canette m√©tal","bo√Æte boisson"], note: "Bien vid√©e, inutile de rincer." },
      { name: "Bo√Æte de conserve", category: "poubelle_jaune", synonyms: ["boite conserve","m√©tal"], note: "" },
      { name: "Brique alimentaire", category: "poubelle_jaune", synonyms: ["brique lait","brique jus","Tetra Pak"], note: "" },
      { name: "Carton", category: "poubelle_jaune", synonyms: ["cartonnette","emballage carton","bo√Æte carton"], note: "Pliez pour gagner de la place. Si tr√®s gras/souill√© ‚Üí ordures." },
      { name: "Carton de pizza propre", category: "poubelle_jaune", synonyms: ["bo√Æte pizza propre"], note: "Sans r√©sidus gras importants. Souill√© ‚Üí ordures." },
      { name: "Papier journal", category: "poubelle_jaune", synonyms: ["journal","magazine","prospectus","revue"], note: "" },
      { name: "Enveloppe avec fen√™tre", category: "poubelle_jaune", synonyms: ["enveloppe fen√™tre"], note: "Laisser la fen√™tre plastique, tri√©e avec le papier." },
      { name: "Bo√Æte de c√©r√©ales", category: "poubelle_jaune", synonyms: ["emballage c√©r√©ales","√©tui carton"], note: "" },
      { name: "Sachet plastique", category: "poubelle_jaune", synonyms: ["sac plastique","emballage souple","film plastique","film √©tirable","cellophane"], note: "" },
      { name: "Sachet de chips", category: "poubelle_jaune", synonyms: ["sachet ap√©ritif","emballage chips"], note: "" },
      { name: "Pot de yaourt", category: "poubelle_jaune", synonyms: ["pot yaourt plastique","yaourt pot"], note: "" },
      { name: "Barquette de viande", category: "poubelle_jaune", synonyms: ["barquette boucherie"], note: "" },
      { name: "Pot de cr√®me fra√Æche", category: "poubelle_jaune", synonyms: ["pot cr√®me"], note: "" },
      { name: "Couvercle m√©tal de bocal", category: "poubelle_jaune", synonyms: ["capsule m√©tal bocal","couvercle bocal"], note: "" },
      { name: "Papier aluminium", category: "poubelle_jaune", synonyms: ["feuille alu","aluminium m√©nager"], note: "S‚Äôil n‚Äôest pas trop sale. Boulez-le pour faciliter le tri." },
      { name: "Barquette en aluminium p√¢tisserie", category: "poubelle_jaune", synonyms: ["barquette alu p√¢tisserie"], note: "" },
      { name: "A√©rosol vide", category: "poubelle_jaune", synonyms: ["spray vide","bombe a√©rosol"], note: "Uniquement s‚Äôil est totalement vide et non dangereux." },
      { name: "D√©odorant spray vide", category: "poubelle_jaune", synonyms: ["a√©rosol d√©o vide"], note: "" },
      { name: "Tube de dentifrice", category: "poubelle_jaune", synonyms: ["tube dentifrice vide"], note: "Bien vid√©." },
      { name: "Flacon de produit d‚Äôentretien vide", category: "poubelle_jaune", synonyms: ["flacon nettoyant vide"], note: "Bien vide." },
      { name: "Gobelet en plastique", category: "poubelle_jaune", synonyms: ["gobelet plastique"], note: "" },
      { name: "Gobelet carton plastifi√©", category: "poubelle_jaune", synonyms: ["gobelet carton"], note: "" },
      { name: "Rouleau carton (PQ, essuie‚Äëtout)", category: "poubelle_jaune", synonyms: ["tube carton"], note: "" },
      { name: "Sac papier kraft", category: "poubelle_jaune", synonyms: ["sac kraft"], note: "S‚Äôil n‚Äôest pas gras." },
      { name: "Bo√Æte √† ≈ìufs en carton", category: "poubelle_jaune", synonyms: ["boite oeufs carton"], note: "Peut aussi aller au compost." },
      { name: "Barquette noire plastique", category: "poubelle_jaune", synonyms: ["barquette noire"], note: "" },
      { name: "Sachet cong√©lation", category: "poubelle_jaune", synonyms: ["sac cong√©lation"], note: "" },
      { name: "Film bulles", category: "poubelle_jaune", synonyms: ["papier bulle","film √† bulles"], note: "" },
      { name: "Bo√Æte de m√©dicaments vide (carton)", category: "poubelle_jaune", synonyms: ["√©tui m√©dicaments"], note: "Les m√©dicaments non utilis√©s ‚Üí pharmacie (Cyclamed), pas en poubelle." },
      { name: "Bouchon plastique", category: "poubelle_jaune", synonyms: ["bouchon bouteille"], note: "√Ä revisser sur la bouteille ou √† mettre en vrac." },
      { name: "Bouchon m√©tallique", category: "poubelle_jaune", synonyms: ["capsule m√©tal"], note: "" },
      { name: "Sachet croquettes (plastique)", category: "poubelle_jaune", synonyms: ["emballage croquettes"], note: "" },
      { name: "Bo√Æte de biscuits", category: "poubelle_jaune", synonyms: ["emballage biscuits","√©tui biscuits"], note: "" },
      { name: "Emballage chocolat", category: "poubelle_jaune", synonyms: ["papier chocolat","emballage sucrerie"], note: "" },
      { name: "Papier cadeau sans paillettes", category: "poubelle_jaune", synonyms: ["papier cadeau simple"], note: "S‚Äôil n‚Äôest pas plastifi√© ni paillet√©." },
      { name: "Catalogue", category: "poubelle_jaune", synonyms: ["brochure","prospectus"], note: "" },
      { name: "Lettre papier", category: "poubelle_jaune", synonyms: ["feuille A4","papier"], note: "" },
      { name: "Carton de colis", category: "poubelle_jaune", synonyms: ["carton d‚Äôemballage","bo√Æte e‚Äëcommerce"], note: "Retirez scotch/plastiques si possible." },
      { name: "Sachet salade (plastique)", category: "poubelle_jaune", synonyms: ["emballage salade"], note: "" },
      { name: "Barquette fruits", category: "poubelle_jaune", synonyms: ["barquette fraises"], note: "" },
      { name: "Filet d‚Äôoranges (plastique)", category: "poubelle_jaune", synonyms: ["filet agrumes"], note: "" },
      { name: "Filet de pommes de terre", category: "poubelle_jaune", synonyms: ["filet patates"], note: "" },
      { name: "Bo√Æte de th√© (carton)", category: "poubelle_jaune", synonyms: ["√©tui th√©"], note: "" },
      { name: "Barquette fromag√®re", category: "poubelle_jaune", synonyms: ["barquette fromage"], note: "" },
      { name: "Pot cosm√©tique plastique", category: "poubelle_jaune", synonyms: ["pot cr√®me visage"], note: "Bien vid√©, bouchon remis." },
      { name: "Bo√Æte √† ≈ìufs plastique", category: "poubelle_jaune", synonyms: ["boite oeufs plastique"], note: "" },
      { name: "Assiette en carton propre", category: "poubelle_jaune", synonyms: ["assiette carton"], note: "Propre et sans r√©sidus. Sinon ‚Üí ordures." },
      { name: "D√©odorant stick", category: "poubelle_jaune", synonyms: ["stick d√©o"], note: "Bien vid√©." },
      { name: "Shampoing solide emballage papier", category: "poubelle_jaune", synonyms: ["emballage savon papier"], note: "" },
      { name: "Sachet surgel√©s", category: "poubelle_jaune", synonyms: ["emballage surgel√©s"], note: "" },
      { name: "Sachet de pain (papier)", category: "poubelle_jaune", synonyms: ["sac boulangerie"], note: "S‚Äôil n‚Äôest pas trop gras." },
      { name: "Bo√Æte de p√¢tisserie (carton)", category: "poubelle_jaune", synonyms: ["boite p√¢tissier"], note: "" },
      { name: "Emballage de fromage (papier/plastique)", category: "poubelle_jaune", synonyms: ["papier fromage"], note: "Mettre plastique et papier au tri s‚Äôils sont vid√©s." },
      { name: "Barquette de charcuterie", category: "poubelle_jaune", synonyms: ["barquette jambon"], note: "" },
      { name: "Bo√Æte de glace (plastique)", category: "poubelle_jaune", synonyms: ["pot glace plastique"], note: "" },
      { name: "Bo√Æte de glace (carton)", category: "poubelle_jaune", synonyms: ["pot glace carton"], note: "" },
      { name: "Filet oignons (plastique)", category: "poubelle_jaune", synonyms: ["filet oignon"], note: "" },
      { name: "Filet ail (plastique)", category: "poubelle_jaune", synonyms: ["filet ails"], note: "" },

      // ===================== Compost (d√©chets organiques) =====================
      { name: "Restes de l√©gumes", category: "compost", synonyms: ["√©pluchures","d√©chets de cuisine","restes v√©g√©taux"], note: "Convient au composteur domestique ou √† la collecte biod√©chets." },
      { name: "Peau de banane", category: "compost", synonyms: ["banane √©pluchure"], note: "" },
      { name: "Peau d‚Äôorange", category: "compost", synonyms: ["orange √©pluchure"], note: "" },
      { name: "Marc de caf√©", category: "compost", synonyms: ["caf√© marc","filtre caf√©"], note: "" },
      { name: "Filtre √† caf√©", category: "compost", synonyms: ["filtre papier caf√©"], note: "" },
      { name: "Sachet de th√© sans agrafe", category: "compost", synonyms: ["th√© sachet"], note: "Retirer l‚Äôagrafe si possible." },
      { name: "Coquilles d‚Äô≈ìuf", category: "compost", synonyms: ["coquille oeuf","coquilles oeufs"], note: "√Ä √©mietter." },
      { name: "Pain rassis", category: "compost", synonyms: ["pain sec"], note: "" },
      { name: "Fleurs fan√©es", category: "compost", synonyms: ["bouquet fan√©","fleurs mortes"], note: "" },
      { name: "Feuilles mortes", category: "compost", synonyms: ["feuilles jardin"], note: "" },
      { name: "Tontes de gazon", category: "compost", synonyms: ["herbe coup√©e"], note: "√Ä m√©langer avec mati√®res s√®ches." },
      { name: "Petites branches broy√©es", category: "compost", synonyms: ["BRF","bois ram√©al fragment√©"], note: "" },
      { name: "Essuie‚Äëtout propre", category: "compost", synonyms: ["sopalin propre","mouchoir papier propre"], note: "Si collecte biod√©chets accept√©e localement." },
      { name: "Mouchoir en papier", category: "compost", synonyms: ["mouchoirs papier","essuie‚Äëtout"], note: "Selon les consignes locales." },
      { name: "Bouchon en li√®ge", category: "compost", synonyms: ["li√®ge bouchon"], note: "Vrai li√®ge uniquement (pas plastique)." },
      { name: "Cheveux et poils", category: "compost", synonyms: ["poils animal","cheveux"], note: "En petites quantit√©s." },
      { name: "Cendres de bois froides", category: "compost", synonyms: ["cendre chemin√©e"], note: "Tr√®s petites quantit√©s." },

      // ===================== Ordures m√©nag√®res =====================
      { name: "Brosse √† dents", category: "ordures", synonyms: ["vieille brosse √† dents"], note: "" },
      { name: "Vaisselle cass√©e (petites quantit√©s)", category: "ordures", synonyms: ["assiette cass√©e","bol cass√©","porcelaine cass√©e"], note: "√Ä bien emballer pour √©viter les blessures." },
      { name: "Couches jetables", category: "ordures", synonyms: ["couches b√©b√©","couche"], note: "" },
      { name: "Lingettes", category: "ordures", synonyms: ["lingette","lingettes nettoyantes"], note: "" },
      { name: "Masque chirurgical", category: "ordures", synonyms: ["masques jetables"], note: "" },
      { name: "Gants jetables", category: "ordures", synonyms: ["gants latex","gants nitrile"], note: "" },
      { name: "Liti√®re pour chat", category: "ordures", synonyms: ["liti√®re animaux"], note: "" },
      { name: "M√©got de cigarette", category: "ordures", synonyms: ["m√©got","cigarette"], note: "" },
      { name: "Chewing‚Äëgum", category: "ordures", synonyms: ["gomme √† m√¢cher"], note: "" },
      { name: "Carton de pizza souill√©", category: "ordures", synonyms: ["bo√Æte pizza grasse"], note: "Trop gras ‚Üí ordures." },
      { name: "Papier cuisson", category: "ordures", synonyms: ["papier sulfuris√©"], note: "Souvent silicon√©, non recyclable." },
      { name: "Enveloppe √† bulles", category: "ordures", synonyms: ["enveloppe bulle"], note: "Mat√©riaux composites." },
      { name: "Tickets de caisse", category: "ordures", synonyms: ["ticket caisse","ticket thermique"], note: "Non recyclable." },
      { name: "Ustensiles jetables (fourchette, couteau, paille)", category: "ordures", synonyms: ["couverts plastique","paille"], note: "Non emballage." },
      { name: "Brosse vaisselle us√©e", category: "ordures", synonyms: ["brosse cuisine"], note: "" },
      { name: "Serpill√®re us√©e", category: "ordures", synonyms: ["chiffon sale"], note: "" },
      { name: "Stylo bille us√©", category: "ordures", synonyms: ["bic us√©","feutre us√©"], note: "" },
      { name: "Ampoule √† incandescence", category: "ordures", synonyms: ["lampe incandescence","ampoule halog√®ne"], note: "Fluocompactes/n√©ons ‚Üí d√©chetterie." },
      { name: "Poisson et viande (restes)", category: "ordures", synonyms: ["restes viande","restes poisson"], note: "√âviter au compost domestique." },
      { name: "Os et ar√™tes", category: "ordures", synonyms: ["os", "ar√™tes poisson"], note: "" },
      { name: "Coquilles de fruits de mer", category: "ordures", synonyms: ["coquilles hu√Ætres","coquilles moules"], note: "" },
      { name: "Sac poubelle rempli", category: "ordures", synonyms: ["sac d√©chets m√©nagers"], note: "" },
      { name: "Polystyr√®ne bloc (grand volume)", category: "ordures", synonyms: ["mousse polystyr√®ne"], note: "Selon communes, parfois d√©chetterie." },

      // ===================== D√©chetterie / points de collecte d√©di√©s =====================
      { name: "Pile", category: "dechetterie", synonyms: ["piles","pile usag√©e"], note: "Apporter en point de collecte (magasins) ou en d√©chetterie." },
      { name: "Batterie", category: "dechetterie", synonyms: ["batterie voiture","batterie lithium"], note: "" },
      { name: "Ampoule fluocompacte", category: "dechetterie", synonyms: ["basse consommation","ampoule fluo"], note: "Rapporter en point de collecte (magasins) ou en d√©chetterie." },
      { name: "N√©on", category: "dechetterie", synonyms: ["tube fluorescent"], note: "" },
      { name: "Huile de friture", category: "dechetterie", synonyms: ["huile usag√©e"], note: "Ne jamais verser dans l‚Äô√©vier." },
      { name: "Huile moteur usag√©e", category: "dechetterie", synonyms: ["huile vidange"], note: "" },
      { name: "Bidon d‚Äôhuile moteur vide", category: "dechetterie", synonyms: ["bidon huile moteur vide"], note: "R√©sidus dangereux; amener en d√©chetterie." },
      { name: "Capsule de caf√© en aluminium", category: "dechetterie", synonyms: ["capsule caf√©","dosette caf√©","Nespresso"], note: "Beaucoup d‚Äôenseignes reprennent les capsules pour recyclage." },
      { name: "Capsule de caf√© en plastique", category: "dechetterie", synonyms: ["capsule plastique"], note: "Programmes de reprise d√©di√©s selon marque." },
      { name: "Cartouche d‚Äôencre", category: "dechetterie", synonyms: ["cartouche imprimante","toner"], note: "" },
      { name: "Petit √©lectrom√©nager", category: "dechetterie", synonyms: ["DEEE","appareil √©lectrique","mixeur","grille‚Äëpain"], note: "Reprise en magasin possible (1 pour 1 / 1 pour 0)." },
      { name: "T√©l√©phone portable", category: "dechetterie", synonyms: ["smartphone","mobile"], note: "Reprise en magasin, recyclerie, dons." },
      { name: "Chargeur et c√¢ble", category: "dechetterie", synonyms: ["chargeur","c√¢ble USB"], note: "" },
      { name: "Ordinateur", category: "dechetterie", synonyms: ["PC","laptop"], note: "" },
      { name: "T√©l√©vision", category: "dechetterie", synonyms: ["√©cran TV"], note: "" },
      { name: "Thermom√®tre au mercure", category: "dechetterie", synonyms: ["thermom√®tre mercure"], note: "D√©chet dangereux." },
      { name: "Thermom√®tre √©lectronique", category: "dechetterie", synonyms: ["thermom√®tre digital"], note: "" },
      { name: "Radiographies", category: "dechetterie", synonyms: ["radio m√©dicale"], note: "" },
      { name: "Extincteur", category: "dechetterie", synonyms: ["extincteur usag√©"], note: "" },
      { name: "Cartouche de gaz camping", category: "dechetterie", synonyms: ["cartouche gaz","camping gaz"], note: "" },
      { name: "Bouteille de gaz", category: "dechetterie", synonyms: ["bonbonne gaz"], note: "Retour au revendeur recommand√©." },
      { name: "Peinture", category: "dechetterie", synonyms: ["pots de peinture"], note: "D√©chet dangereux: d√©chetterie uniquement." },
      { name: "Vernis et solvants", category: "dechetterie", synonyms: ["solvant","white‚Äëspirit"], note: "Ne pas jeter √† l‚Äô√©vier." },
      { name: "Produit phytosanitaire", category: "dechetterie", synonyms: ["pesticide","d√©sherbant"], note: "" },
      { name: "A√©rosol dangereux plein", category: "dechetterie", synonyms: ["bombe insecticide pleine"], note: "" },
      { name: "Pneus", category: "dechetterie", synonyms: ["pneu"], note: "Reprise chez les distributeurs possible." },
      { name: "Gravats et terre", category: "dechetterie", synonyms: ["d√©chets inertes","d√©combres"], note: "" },
      { name: "Meubles et matelas", category: "dechetterie", synonyms: ["mobilier","matelas"], note: "Don possible si en bon √©tat." },
      { name: "Casserole/po√™le", category: "dechetterie", synonyms: ["casserole","po√™le"], note: "" },
      { name: "Jouet en plastique", category: "dechetterie", synonyms: ["jouet","jouet cass√©"], note: "Don si en bon √©tat." },
      { name: "Sapin de No√´l", category: "dechetterie", synonyms: ["sapin"], note: "Broyage/compostage parfois propos√© par la commune." },
      { name: "M√©dicaments non utilis√©s", category: "dechetterie", synonyms: ["m√©dicament p√©rim√©"], note: "Rapporter en pharmacie (Cyclamed), pas en poubelle." },
      { name: "Batterie d‚Äôordinateur", category: "dechetterie", synonyms: ["batterie lithium laptop"], note: "" },
      { name: "Lampe LED d√©fectueuse", category: "dechetterie", synonyms: ["ampoule LED"], note: "" },
      { name: "Toner d‚Äôimprimante", category: "dechetterie", synonyms: ["cartouche laser"], note: "" },
      { name: "Fer √† repasser", category: "dechetterie", synonyms: ["fer"], note: "" },
      { name: "Radiateur √©lectrique", category: "dechetterie", synonyms: ["convecteur"], note: "" },
      { name: "Ventilateur", category: "dechetterie", synonyms: ["ventilo"], note: "" },
      { name: "Micro‚Äëondes", category: "dechetterie", synonyms: ["four micro ondes"], note: "" },
      { name: "Imprimante", category: "dechetterie", synonyms: ["imprimante jet d‚Äôencre","imprimante laser"], note: "" },
      { name: "Tondeuse √† gazon", category: "dechetterie", synonyms: ["tondeuse"], note: "" },
      { name: "Outils √©lectriques", category: "dechetterie", synonyms: ["perceuse","scie sauteuse"], note: "" },
      { name: "Parasol cass√©", category: "dechetterie", synonyms: ["parasol"], note: "" },

      // ===================== Cas sp√©cifiques =====================
      { name: "Papier cadeau plastifi√©/paillet√©", category: "ordures", synonyms: ["papier cadeau brillant"], note: "Non recyclable." },
      { name: "Assiette en carton sale", category: "ordures", synonyms: ["assiette carton souill√©e"], note: "" },
      { name: "Barquette PLA dite compostable", category: "ordures", synonyms: ["emballage biod√©gradable"], note: "Compost industriel uniquement. √Ä domicile: ordures." },
      { name: "Papier aluminium tr√®s sale", category: "ordures", synonyms: ["alu sale"], note: "" },
      { name: "Carton souill√© (gras, humide)", category: "ordures", synonyms: ["carton gras"], note: "" }
    ];

    const CATEGORY_INFO = {
      poubelle_jaune: {
        label: "Poubelle jaune de tri",
        className: "cat-jaune",
        emoji: "üü°‚ôªÔ∏è",
        announce: "√Ä d√©poser dans la poubelle jaune de tri.",
      },
      compost: {
        label: "Compost",
        className: "cat-compost",
        emoji: "üåø",
        announce: "√Ä mettre au compost (ou bac biod√©chets si pr√©sent).",
      },
      ordures: {
        label: "Ordures m√©nag√®res",
        className: "cat-ordures",
        emoji: "üóëÔ∏è",
        announce: "√Ä jeter avec les ordures m√©nag√®res.",
      },
      dechetterie: {
        label: "D√©chetterie",
        className: "cat-dechetterie",
        emoji: "üè≠",
        announce: "√Ä d√©poser en d√©chetterie ou point de collecte d√©di√©.",
      },
    };

    const input = document.getElementById("product-input");
    const clearBtn = document.getElementById("clear-btn");
    const suggList = document.getElementById("suggestions");
    const result = document.getElementById("result");
    const productNameEl = document.getElementById("product-name");
    const badgeEl = document.getElementById("category-badge");
    const badgeText = badgeEl.querySelector("span:last-child");
    const badgeIcon = badgeEl.querySelector(".ico");
    const categoryNote = document.getElementById("category-note");
    const synonymsWrap = document.getElementById("synonyms");

    let activeIndex = -1;
    let currentSuggestions = [];

    // Utils
    function norm(str){
      return (str || "")
        .toString()
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .trim();
    }
    function escapeHTML(s){
      return (s ?? "").toString()
        .replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
        .replace(/"/g,"&quot;").replace(/'/g,"&#39;");
    }
    function escapeRegex(s){
      return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    }
    function highlight(text, query){
      if(!query) return escapeHTML(text);
      try{
        const re = new RegExp(escapeRegex(query), "ig");
        return escapeHTML(text).replace(re, (m)=> `<mark>${escapeHTML(m)}</mark>`);
      }catch{
        return escapeHTML(text);
      }
    }

    function scoreItem(q, item){
      const nQ = norm(q);
      const fields = [item.name, ...(item.synonyms || [])].map(norm);
      let best = -Infinity;
      for(const f of fields){
        if(!nQ) { best = Math.max(best, 0); continue; }
        if(f === nQ) best = Math.max(best, 1000);
        else if(f.startsWith(nQ)) best = Math.max(best, 800 - (f.length - nQ.length));
        else if(f.includes(nQ)) best = Math.max(best, 400 - (f.indexOf(nQ)));
      }
      best += Math.max(0, 40 - item.name.length);
      return best;
    }

    function search(q, limit=10){
      const scored = ITEMS
        .map(item => ({ item, s: scoreItem(q, item)}))
        .filter(x => x.s > (q ? 250 : 0))
        .sort((a,b) => b.s - a.s)
        .slice(0, limit)
        .map(x => x.item);
      return scored;
    }

    function categoryPill(cat){
      const info = CATEGORY_INFO[cat];
      const label = info ? info.label : "Cat√©gorie";
      const cls = info ? info.className : "";
      return `<span class="pill ${cls}">${label}</span>`;
    }

    function renderSuggestions(items){
      suggList.innerHTML = "";
      activeIndex = -1;
      input.setAttribute("aria-activedescendant", "");
      currentSuggestions = items;

      const q = input.value;
      const head = document.createElement("div");
      head.className = "s-head";
      head.textContent = items.length ? "Suggestions" : "Aucune suggestion";
      suggList.appendChild(head);

      if(items.length === 0){
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "Essayez un autre mot (ex. \"brique\", \"carton\", \"pile\"‚Ä¶).";
        suggList.appendChild(empty);
        suggList.hidden = false;
        setExpanded(true);
        return;
      }

      items.forEach((it, idx) => {
        const row = document.createElement("div");
        row.id = `sug-${idx}`;
        row.className = "s-item";
        row.role = "option";
        row.tabIndex = -1;
        row.setAttribute("data-index", String(idx));
        row.innerHTML = `
          <div class="s-left">
            <div class="avatar" aria-hidden="true">üîπ</div>
            <div class="label">${highlight(it.name, q)}</div>
          </div>
          <div class="s-right">
            ${categoryPill(it.category)}
            <div class="arrow" aria-hidden="true">‚ûî</div>
          </div>
        `;
        row.addEventListener("click", () => selectSuggestion(idx));
        suggList.appendChild(row);
      });
      suggList.hidden = false;
      setExpanded(true);
    }

    function setExpanded(expanded){
      const wrap = input.closest(".search-wrap");
      wrap?.setAttribute("aria-expanded", expanded ? "true" : "false");
    }

    function moveActive(delta){
      if(suggList.hidden) return;
      const items = Array.from(suggList.querySelectorAll(".s-item"));
      const count = items.length;
      if(count === 0) return;
      activeIndex = (activeIndex + delta + count) % count;
      items.forEach((li, i) => {
        if(!(li instanceof HTMLElement)) return;
        if(i === activeIndex){
          li.setAttribute("aria-selected", "true");
          input.setAttribute("aria-activedescendant", li.id);
          li.scrollIntoView({ block: "nearest" });
        }else{
          li.setAttribute("aria-selected", "false");
        }
      });
    }

    function closeSuggestions(){
      suggList.hidden = true;
      setExpanded(false);
      activeIndex = -1;
      input.setAttribute("aria-activedescendant", "");
    }

    function selectSuggestion(idx){
      const chosen = currentSuggestions[idx];
      if(!chosen) return;
      input.value = chosen.name;
      closeSuggestions();
      showResult(chosen);
    }

    function renderSynonyms(syns){
      if(!syns || syns.length === 0){
        synonymsWrap.hidden = true;
        synonymsWrap.innerHTML = "";
        return;
      }
      synonymsWrap.innerHTML = syns.map(s => `<span class="syn-chip">${escapeHTML(s)}</span>`).join("");
      synonymsWrap.hidden = false;
    }

    function showResult(item){
      const info = CATEGORY_INFO[item.category] || {label: "Cat√©gorie", className: "", emoji: "‚ÑπÔ∏è"};
      productNameEl.textContent = item.name;
      // Badge
      badgeEl.className = "badge " + info.className;
      badgeText.textContent = info.label;
      badgeIcon.textContent = info.emoji || "‚ÑπÔ∏è";
      // Note
      categoryNote.textContent = item.note ? item.note : info.announce || "";
      // Synonymes
      renderSynonyms(item.synonyms);
      // Affichage
      result.hidden = false;
      requestAnimationFrame(() => result.classList.add("show"));
    }

    function clearAll(){
      input.value = "";
      closeSuggestions();
      result.classList.remove("show");
      result.hidden = true;
      input.focus();
    }

    // Events
    input.addEventListener("input", () => {
      const q = input.value;
      const items = search(q);
      if(q.length === 0){
        renderSuggestions(ITEMS.slice(0, 10));
      }else{
        renderSuggestions(items);
      }
    });

    input.addEventListener("focus", () => {
      const q = input.value;
      const items = q ? search(q) : ITEMS.slice(0,10);
      renderSuggestions(items);
    });

    input.addEventListener("keydown", (e) => {
      switch(e.key){
        case "ArrowDown":
          e.preventDefault();
          moveActive(1);
          break;
        case "ArrowUp":
          e.preventDefault();
          moveActive(-1);
          break;
        case "Enter":
          if(!suggList.hidden){
            e.preventDefault();
            if(activeIndex >= 0){ selectSuggestion(activeIndex); }
            else if(currentSuggestions.length > 0){ selectSuggestion(0); }
          }
          break;
        case "Escape":
          if(!suggList.hidden){
            e.preventDefault();
            closeSuggestions();
          }
          break;
      }
    });

    document.addEventListener("click", (e) => {
      const wrap = input.closest(".search-wrap");
      if(!wrap) return;
      if(!wrap.contains(e.target)){
        closeSuggestions();
      }
    });

    clearBtn.addEventListener("click", clearAll);

    // Initial suggestions
    renderSuggestions(ITEMS.slice(0,10));
  </script>
</body>
</html>